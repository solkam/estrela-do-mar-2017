<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:cb="http://java.sun.com/jsf/composite/component">

<h:form id="formConfigProductor">

	<cb:globalMessages />
	
	<h:panelGrid columns="2" cellpadding="5" >
	
		<p:panel header="Produtor 1" style="height:400px">
			
			<h:panelGrid cellpadding="0">
				<h:outputText value="#{i18n.label_search_contact_by_new_name_or_civil_name}" styleClass="less2" />
									
				<p:autoComplete value="#{configContactBean.contact.productorContact}"
					completeMethod="#{autoCompleteContactBean.queryProductorContact }"  
					var="contactVar" itemValue="#{contactVar}" itemLabel="#{contactVar.fullDesc }"
					converter="#{contactConverter}"
					queryDelay="500" size="50" forceSelection="false" minQueryLength="2" scrollHeight="200"
					styleClass="destak2" >
				
					<p:column headerText="#{i18n.label_civil_name}">
						#{contactVar.civilName}
					</p:column>
	
					<p:column headerText="#{i18n.label_new_name}">
						#{contactVar.name}
					</p:column>
				
					<p:column headerText="#{i18n.label_city}">
						#{contactVar.city}
					</p:column>
					
					<p:ajax event="itemSelect" process="@this" 
						listener="#{configContactBean.saveProductor}" 
						update="@form" 
						/>
				</p:autoComplete>
			</h:panelGrid>
			
			
			<p:outputPanel>
				<h:outputText value="#{i18n.msg_no_productor_selected}" styleClass="less2 req"
					rendered="#{empty configContactBean.contact.productorContact}" />
			
				<p:panelGrid columns="2" 
					rendered="#{not empty configContactBean.contact.productorContact}" >
			
					<h:outputText value="#{i18n.label_civil_name}:" styleClass="less2" />
					<h:outputText value="#{configContactBean.contact.productorContact.civilName }" styleClass="destak2" />
			
					<h:outputText value="#{i18n.label_new_name}:" styleClass="less2" />
					<h:outputText value="#{configContactBean.contact.productorContact.name }" styleClass="destak2" />
					
					<h:outputText value="#{i18n.label_root_school}:" styleClass="less2" />
					<h:outputText value="#{configContactBean.contact.productorContact.rootSchool.description }" styleClass="destak3" />

					<h:outputText value="#{i18n.label_city}:" styleClass="less2" />
					<h:outputText value="#{configContactBean.contact.productorContact.city }" styleClass="destak3" />
					
					<f:facet name="footer">
						<p:commandLink icon="ui-icon-close" value="#{i18n.label_to_remove_productor }" styleClass="less2"
							process="@this"
							action="#{configContactBean.saveProductor}"
							update="@form" >
							
							<f:setPropertyActionListener target="#{configContactBean.contact.productorContact}" 
							                             value="#{null}" 
							                             />
						</p:commandLink>
					</f:facet>
				</p:panelGrid>
			</p:outputPanel>
		</p:panel>



		<p:panel header="Produtor 2" style="height:400px">
			
			<h:panelGrid cellpadding="0">
				<h:outputText value="#{i18n.label_search_contact_by_new_name_or_civil_name}" styleClass="less2" />
									
				<p:autoComplete value="#{configContactBean.contact.productorContact2}"
					completeMethod="#{autoCompleteContactBean.queryProductorContact }"  
					var="contactVar" itemValue="#{contactVar}" itemLabel="#{contactVar.fullDesc }"
					converter="#{contactConverter}"
					queryDelay="500" size="50" forceSelection="false" minQueryLength="2" scrollHeight="200"
					styleClass="destak2" >
				
					<p:column headerText="#{i18n.label_civil_name}">
						#{contactVar.civilName}
					</p:column>
	
					<p:column headerText="#{i18n.label_new_name}">
						#{contactVar.name}
					</p:column>
				
					<p:column headerText="#{i18n.label_city}">
						#{contactVar.city}
					</p:column>
					
					<p:ajax event="itemSelect" process="@this" 
						listener="#{configContactBean.saveProductor}" 
						update="@form" 
						/>
				</p:autoComplete>
			</h:panelGrid>
			
			<p:outputPanel>
				<h:outputText value="#{i18n.msg_no_productor_selected}" styleClass="less2 req"
					rendered="#{empty configContactBean.contact.productorContact2}" />
			
				<p:panelGrid columns="2" 
					rendered="#{not empty configContactBean.contact.productorContact2}" >
			
					<h:outputText value="#{i18n.label_civil_name}:" styleClass="less2" />
					<h:outputText value="#{configContactBean.contact.productorContact2.civilName }" styleClass="destak2" />
			
					<h:outputText value="#{i18n.label_new_name}:" styleClass="less2" />
					<h:outputText value="#{configContactBean.contact.productorContact2.name }" styleClass="destak2" />
					
					<h:outputText value="#{i18n.label_root_school}:" styleClass="less2" />
					<h:outputText value="#{configContactBean.contact.productorContact2.rootSchool.description }" styleClass="destak3" />

					<h:outputText value="#{i18n.label_city}:" styleClass="less2" />
					<h:outputText value="#{configContactBean.contact.productorContact2.city }" styleClass="destak3" />
					
					<f:facet name="footer">
						<p:commandLink icon="ui-icon-close" value="#{i18n.label_to_remove_productor }" styleClass="less2"
							process="@this"
							action="#{configContactBean.saveProductor}"
							update="@form" >
							
							<f:setPropertyActionListener target="#{configContactBean.contact.productorContact2}" 
							                             value="#{null}" 
							                             />
						</p:commandLink>
					</f:facet>
				</p:panelGrid>
			</p:outputPanel>
		</p:panel>



	</h:panelGrid>
	
</h:form>


</ui:fragment>
